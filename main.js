window.onload = () => {
    const preloader = document.getElementById('preloader');
    const body = document.body;

    if (preloader) {
        // Fade out the preloader
        preloader.style.opacity = '0';
        preloader.style.visibility = 'hidden';
        body.classList.remove('loading');
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // --- Sidebar Navigation ---
    const sidebar = document.getElementById("sidebar");
    const overlay = document.getElementById("overlay");
    const openNav = () => {
        if(sidebar) sidebar.style.width = "250px";
        if(overlay) { overlay.style.visibility = "visible"; overlay.style.opacity = "1"; }
    };
    const closeNav = () => {
        if(sidebar) sidebar.style.width = "0";
        if(overlay) { overlay.style.visibility = "hidden"; overlay.style.opacity = "0"; }
    };
    // Make functions globally available for inline onclick attributes
    window.openNav = openNav;
    window.closeNav = closeNav;

    // --- Theme Toggling ---
    const themeToggle = document.getElementById('theme-toggle');
    const body = document.body;

    const applyTheme = (theme) => {
        body.dataset.theme = theme;
        if (themeToggle) {
            themeToggle.textContent = theme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
        }
        localStorage.setItem('theme', theme);
    };

    if (themeToggle) {
        themeToggle.addEventListener('click', () => {
            const newTheme = body.dataset.theme === 'dark' ? 'light' : 'dark';
            applyTheme(newTheme);
        });
    }

    // --- Language Switching ---
    const langSelect = document.getElementById('lang-select');
    const translations = {
        // Note: It's better to load this from a JSON file, but for now, this works.
        en: { nav_home: "Home", nav_albums: "Albums", nav_events: "Events", nav_faqs: "FAQs", nav_join: "Join", nav_book: "Book Now", nav_chatbox: "Chatbox", welcome_title: "Welcome to Dreams In Blue", welcome_subtitle: "Where the Depth of music Present", welcome_text: "Lorem ipsum dolor sit amet consectetur adipisicing elit.  <br>Corrupti molestias possimus nisi error. Inventor", join_us_btn: "Join us", copyright: "copyright disclaimer", albums_title: "Our Albums", listen: "Listen", join_title_fan: "Join the Nation!", join_subtitle_fan: "Sign up to get the latest news, tour dates, and exclusive content straight to your inbox.", birthday_label: "Birthday (Optional)", subscribe_btn: "Subscribe", join_title_band: "Want to Join the Band?", join_subtitle_band: "Think you have what it takes to rock with us? Fill out the form below with your details and a link to your work. We're always looking for new talent!", audition_btn: "Submit Audition" },
        es: { nav_home: "Inicio", nav_albums: "√Ålbumes", nav_events: "Eventos", nav_faqs: "Preguntas", nav_join: "Unirse", nav_book: "Reservar", nav_chatbox: "Chat", welcome_title: "Bienvenidos a Dreams In Blue", welcome_subtitle: "Donde la profundidad de la m√∫sica se presenta", welcome_text: "Lorem ipsum dolor sit amet consectetur adipisicing elit. <br>Corrupti molestias possimus nisi error. Inventor", join_us_btn: "√önete a nosotros", copyright: "aviso de copyright", albums_title: "Nuestros √Ålbumes", listen: "Escuchar", join_title_fan: "¬°√önete a la Naci√≥n!", join_subtitle_fan: "Reg√≠strate para recibir las √∫ltimas noticias, fechas de giras y contenido exclusivo directamente en tu bandeja de entrada.", birthday_label: "Cumplea√±os (Opcional)", subscribe_btn: "Suscribir", join_title_band: "¬øQuieres Unirte a la Banda?", join_subtitle_band: "¬øCrees que tienes lo necesario para rockear con nosotros? Completa el formulario a continuaci√≥n con tus datos y un enlace a tu trabajo. ¬°Siempre estamos buscando nuevos talentos!", audition_btn: "Enviar Audici√≥n" },
        te: { nav_home: "‡∞π‡±ã‡∞Æ‡±ç", nav_albums: "‡∞Ü‡∞≤‡±ç‡∞¨‡∞Æ‡±ç‚Äå‡∞≤‡±Å", nav_events: "‡∞à‡∞µ‡±Ü‡∞Ç‡∞ü‡±ç‚Äå‡∞≤‡±Å", nav_faqs: "‡∞™‡±ç‡∞∞‡∞∂‡±ç‡∞®‡∞≤‡±Å", nav_join: "‡∞ö‡±á‡∞∞‡∞Ç‡∞°‡∞ø", nav_book: "‡∞á‡∞™‡±ç‡∞™‡±Å‡∞°‡±á ‡∞¨‡±Å‡∞ï‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø", nav_chatbox: "‡∞ö‡∞æ‡∞ü‡±ç‚Äå‡∞¨‡∞æ‡∞ï‡±ç‡∞∏‡±ç", welcome_title: "‡∞°‡±ç‡∞∞‡±Ä‡∞Æ‡±ç‡∞∏‡±ç ‡∞á‡∞®‡±ç ‡∞¨‡±ç‡∞≤‡±Ç‡∞ï‡∞ø ‡∞∏‡±ç‡∞µ‡∞æ‡∞ó‡∞§‡∞Ç", welcome_subtitle: "‡∞∏‡∞Ç‡∞ó‡±Ä‡∞§‡∞Ç ‡∞Ø‡±ä‡∞ï‡±ç‡∞ï ‡∞≤‡±ã‡∞§‡±Å ‡∞â‡∞®‡±ç‡∞® ‡∞ö‡±ã‡∞ü", welcome_text: "‡∞≤‡±ã‡∞∞‡±Ü‡∞Æ‡±ç ‡∞á‡∞™‡±ç‡∞∏‡∞Æ‡±ç ‡∞°‡±ã‡∞≤‡∞∞‡±ç ‡∞∏‡∞ø‡∞ü‡±ç ‡∞Ö‡∞Æ‡±Ü‡∞ü‡±ç ‡∞ï‡∞®‡±ç‡∞∏‡±Ü‡∞ï‡±ç‡∞ü‡±Ü‡∞ü‡∞∞‡±ç ‡∞Ö‡∞°‡∞ø‡∞™‡∞ø‡∞∏‡∞ø‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç ‡∞é‡∞≤‡∞ø‡∞ü‡±ç. <br>‡∞ï‡∞∞‡∞™‡±ç‡∞ü‡∞ø ‡∞Æ‡±ã‡∞≤‡±á‡∞∏‡±ç‡∞ü‡∞ø‡∞Ø‡∞æ‡∞∏‡±ç ‡∞™‡±ã‡∞∏‡∞ø‡∞Æ‡∞∏‡±ç ‡∞®‡∞ø‡∞∏‡∞ø ‡∞é‡∞∞‡±ç‡∞∞‡∞∞‡±ç. ‡∞á‡∞®‡±ç‡∞µ‡±Ü‡∞Ç‡∞ü‡∞∞‡±ç", join_us_btn: "‡∞Æ‡∞æ‡∞§‡±ã ‡∞ö‡±á‡∞∞‡∞Ç‡∞°‡∞ø", copyright: "‡∞ï‡∞æ‡∞™‡±Ä‡∞∞‡±à‡∞ü‡±ç ‡∞®‡∞ø‡∞∞‡∞æ‡∞ï‡∞∞‡∞£", albums_title: "‡∞Æ‡∞æ ‡∞Ü‡∞≤‡±ç‡∞¨‡∞Æ‡±ç‚Äå‡∞≤‡±Å", listen: "‡∞µ‡∞ø‡∞®‡∞Ç‡∞°‡∞ø", join_title_fan: "‡∞®‡±á‡∞∑‡∞®‡±ç‚Äå‡∞≤‡±ã ‡∞ö‡±á‡∞∞‡∞Ç‡∞°‡∞ø!", join_subtitle_fan: "‡∞§‡∞æ‡∞ú‡∞æ ‡∞µ‡∞æ‡∞∞‡±ç‡∞§‡∞≤‡±Å, ‡∞™‡∞∞‡±ç‡∞Ø‡∞ü‡∞® ‡∞§‡±á‡∞¶‡±Ä‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞™‡±ç‡∞∞‡∞§‡±ç‡∞Ø‡±á‡∞ï‡∞Æ‡±à‡∞® ‡∞ï‡∞Ç‡∞ü‡±Ü‡∞Ç‡∞ü‡±ç‚Äå‡∞®‡±Å ‡∞®‡±á‡∞∞‡±Å‡∞ó‡∞æ ‡∞Æ‡±Ä ‡∞á‡∞®‡±ç‚Äå‡∞¨‡∞æ‡∞ï‡±ç‡∞∏‡±ç‚Äå‡∞ï‡±Å ‡∞™‡±ä‡∞Ç‡∞¶‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡±à‡∞®‡±ç ‡∞Ö‡∞™‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.", birthday_label: "‡∞™‡±Å‡∞ü‡±ç‡∞ü‡∞ø‡∞®‡∞∞‡±ã‡∞ú‡±Å (‡∞ê‡∞ö‡±ç‡∞õ‡∞ø‡∞ï‡∞Ç)", subscribe_btn: "‡∞∏‡∞≠‡±ç‡∞Ø‡∞§‡±ç‡∞µ‡∞Ç ‡∞™‡±ä‡∞Ç‡∞¶‡∞Ç‡∞°‡∞ø", join_title_band: "‡∞¨‡±ç‡∞Ø‡∞æ‡∞Ç‡∞°‡±ç‚Äå‡∞≤‡±ã ‡∞ö‡±á‡∞∞‡∞æ‡∞≤‡∞®‡±Å‡∞ï‡±Å‡∞Ç‡∞ü‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞∞‡∞æ?", join_subtitle_band: "‡∞Æ‡∞æ‡∞§‡±ã ‡∞∞‡∞æ‡∞ï‡±ç ‡∞ö‡±á‡∞Ø‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞Æ‡±Ä‡∞ï‡±Å ‡∞è‡∞Æ‡∞ø ‡∞ï‡∞æ‡∞µ‡∞æ‡∞≤‡±ã ‡∞Ü‡∞≤‡±ã‡∞ö‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞∞‡∞æ? ‡∞Æ‡±Ä ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Æ‡±Ä ‡∞™‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡∞Ç‡∞¨‡∞Ç‡∞ß‡∞ø‡∞Ç‡∞ö‡∞ø‡∞® ‡∞≤‡∞ø‡∞Ç‡∞ï‡±ç‚Äå‡∞§‡±ã ‡∞¶‡∞ø‡∞ó‡±Å‡∞µ ‡∞´‡∞æ‡∞∞‡∞Æ‡±ç‚Äå‡∞®‡±Å ‡∞™‡±Ç‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø. ‡∞Æ‡±á‡∞Æ‡±Å ‡∞é‡∞≤‡±ç‡∞≤‡∞™‡±ç‡∞™‡±Å‡∞°‡±Ç ‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞™‡±ç‡∞∞‡∞§‡∞ø‡∞≠ ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞ö‡±Ç‡∞∏‡±ç‡∞§‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞Æ‡±Å!", audition_btn: "‡∞Ü‡∞°‡∞ø‡∞∑‡∞®‡±ç‚Äå‡∞®‡±Å ‡∞∏‡∞Æ‡∞∞‡±ç‡∞™‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø" },
        hi: { nav_home: "‡§π‡•ã‡§Æ", nav_albums: "‡§è‡§≤‡§¨‡§Æ", nav_events: "‡§á‡§µ‡•á‡§Ç‡§ü‡•ç‡§∏", nav_faqs: "‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§™‡•Ç‡§õ‡•á ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§®", nav_join: "‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§Ç", nav_book: "‡§Ö‡§≠‡•Ä ‡§¨‡•Å‡§ï ‡§ï‡§∞‡•á‡§Ç", nav_chatbox: "‡§ö‡•à‡§ü‡§¨‡•â‡§ï‡•ç‡§∏", welcome_title: "‡§°‡•ç‡§∞‡•Ä‡§Æ‡•ç‡§∏ ‡§á‡§® ‡§¨‡•ç‡§≤‡•Ç ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à", welcome_subtitle: "‡§ú‡§π‡§æ‡§Ç ‡§∏‡§Ç‡§ó‡•Ä‡§§ ‡§ï‡•Ä ‡§ó‡§π‡§∞‡§æ‡§à ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§π‡•à", welcome_text: "‡§≤‡•ã‡§∞‡•á‡§Æ ‡§á‡§™‡•ç‡§∏‡§Æ ‡§°‡•ã‡§≤‡•ã‡§∞ ‡§∏‡§ø‡§ü ‡§Ö‡§Æ‡•á‡§ü ‡§ï‡•â‡§®‡•ç‡§∏‡•á‡§ï‡•ç‡§ü‡•á‡§ü‡§∞ ‡§è‡§°‡§ø‡§™‡§ø‡§∏‡§ø‡§∏‡§ø‡§Ç‡§ó ‡§è‡§≤‡•Ä‡§ü‡•§ <br>‡§ï‡§∞‡§™‡•ç‡§ü‡•Ä ‡§Æ‡•ã‡§≤‡•á‡§∏‡•ç‡§ü‡§ø‡§Ø‡§æ‡§∏ ‡§™‡•ã‡§∏‡§ø‡§Æ‡§∏ ‡§®‡§ø‡§∏‡§ø ‡§è‡§∞‡§∞‡•§ ‡§á‡§®‡•ç‡§µ‡•á‡§Ç‡§ü‡§∞", join_us_btn: "‡§π‡§Æ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•á‡§Ç", copyright: "‡§ï‡•â‡§™‡•Ä‡§∞‡§æ‡§á‡§ü ‡§Ö‡§∏‡•ç‡§µ‡•Ä‡§ï‡§∞‡§£", albums_title: "‡§π‡§Æ‡§æ‡§∞‡•á ‡§è‡§≤‡§¨‡§Æ", listen: "‡§∏‡•Å‡§®‡•ã", join_title_fan: "‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§Ç!", join_subtitle_fan: "‡§®‡§µ‡•Ä‡§®‡§§‡§Æ ‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞, ‡§¶‡•å‡§∞‡•á ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ‡•á‡§Ç, ‡§î‡§∞ ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§∏‡•Ä‡§ß‡•á ‡§Ö‡§™‡§®‡•á ‡§á‡§®‡§¨‡•â‡§ï‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§™‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§ï‡§∞‡•á‡§Ç‡•§", birthday_label: "‡§ú‡§®‡•ç‡§Æ‡§¶‡§ø‡§® (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)", subscribe_btn: "‡§∏‡§¨‡•ç‡§∏‡§ï‡•ç‡§∞‡§æ‡§á‡§¨ ‡§ï‡§∞‡•á‡§Ç", join_title_band: "‡§¨‡•à‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?", join_subtitle_band: "‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™‡§ï‡•ã ‡§≤‡§ó‡§§‡§æ ‡§π‡•à ‡§ï‡§ø ‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§π‡§Æ‡§æ‡§∞‡•á ‡§∏‡§æ‡§• ‡§∞‡•â‡§ï ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§π ‡§π‡•à ‡§ú‡•ã ‡§ö‡§æ‡§π‡§ø‡§è? ‡§®‡•Ä‡§ö‡•á ‡§¶‡§ø‡§è ‡§ó‡§è ‡§´‡•â‡§∞‡•ç‡§Æ ‡§ï‡•ã ‡§Ö‡§™‡§®‡•á ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§î‡§∞ ‡§Ö‡§™‡§®‡•á ‡§ï‡§æ‡§Æ ‡§ï‡•á ‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•á ‡§∏‡§æ‡§• ‡§≠‡§∞‡•á‡§Ç‡•§ ‡§π‡§Æ ‡§π‡§Æ‡•á‡§∂‡§æ ‡§®‡§à ‡§™‡•ç‡§∞‡§§‡§ø‡§≠‡§æ ‡§ï‡•Ä ‡§§‡§≤‡§æ‡§∂ ‡§Æ‡•á‡§Ç ‡§∞‡§π‡§§‡•á ‡§π‡•à‡§Ç!", audition_btn: "‡§ë‡§°‡§ø‡§∂‡§® ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç" },
        ml: { nav_home: "‡¥π‡µã‡¥Ç", nav_albums: "‡¥Ü‡µΩ‡¥¨‡¥ô‡µç‡¥ô‡µæ", nav_events: "‡¥á‡¥µ‡¥®‡µç‡¥±‡µÅ‡¥ï‡µæ", nav_faqs: "‡¥™‡¥§‡¥ø‡¥µ‡µÅ‡¥ö‡µã‡¥¶‡µç‡¥Ø‡¥ô‡µç‡¥ô‡µæ", nav_join: "‡¥ö‡µá‡¥∞‡µÅ‡¥ï", nav_book: "‡¥á‡¥™‡µç‡¥™‡µã‡µæ ‡¥¨‡µÅ‡¥ï‡µç‡¥ï‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï", nav_chatbox: "‡¥ö‡¥æ‡¥±‡µç‡¥±‡µç‡¥¨‡µã‡¥ï‡µç‡¥∏‡µç", welcome_title: "‡¥°‡µç‡¥∞‡µÄ‡¥Ç‡¥∏‡µç ‡¥á‡µª ‡¥¨‡µç‡¥≤‡µÇ‡¥Ø‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥∏‡µç‡¥µ‡¥æ‡¥ó‡¥§‡¥Ç", welcome_subtitle: "‡¥∏‡¥Ç‡¥ó‡µÄ‡¥§‡¥§‡µç‡¥§‡¥ø‡¥®‡µç‡¥±‡µÜ ‡¥Ü‡¥¥‡¥Ç ‡¥é‡¥µ‡¥ø‡¥ü‡µÜ‡¥Ø‡¥æ‡¥£‡µã", welcome_text: "‡¥≤‡µã‡¥±‡¥Ç ‡¥á‡¥™‡µç‚Äå‡¥∏‡¥Ç ‡¥°‡µã‡¥≥‡µº ‡¥∏‡¥ø‡¥±‡µç‡¥±‡µç ‡¥Ö‡¥Æ‡µá‡¥±‡µç‡¥±‡µç ‡¥ï‡µã‡µ∫‡¥∏‡µÜ‡¥ï‡µç‡¥±‡µç‡¥±‡¥±‡µç‡¥±‡µº ‡¥Ö‡¥°‡¥ø‡¥™‡¥ø‡¥∏‡¥ø‡¥Ç‡¥ó‡µç ‡¥é‡¥≤‡µà‡¥±‡µç‡¥±‡µç. <br>‡¥ï‡¥±‡¥™‡µç‡¥±‡µç‡¥±‡¥ø ‡¥Æ‡µä‡¥≥‡¥∏‡µç‡¥±‡µç‡¥±‡¥ø‡¥Ø‡¥æ‡¥∏‡µç ‡¥™‡µã‡¥∏‡¥ø‡¥Æ‡¥∏‡µç ‡¥®‡¥ø‡¥∏‡¥ø ‡¥é‡¥±‡µº. ‡¥á‡µª‡¥µ‡µÜ‡¥®‡µç‡¥±‡µº", join_us_btn: "‡¥û‡¥ô‡µç‡¥ô‡¥≥‡µã‡¥ü‡µä‡¥™‡µç‡¥™‡¥Ç ‡¥ö‡µá‡¥∞‡µÇ", copyright: "‡¥™‡¥ï‡µº‡¥™‡µç‡¥™‡¥µ‡¥ï‡¥æ‡¥∂ ‡¥®‡¥ø‡¥∞‡¥æ‡¥ï‡¥∞‡¥£‡¥Ç", albums_title: "‡¥û‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥Ü‡µΩ‡¥¨‡¥ô‡µç‡¥ô‡µæ", listen: "‡¥ï‡µá‡µæ‡¥ï‡µç‡¥ï‡µÇ", join_title_fan: "‡¥∞‡¥æ‡¥∑‡µç‡¥ü‡µç‡¥∞‡¥§‡µç‡¥§‡¥ø‡µΩ ‡¥ö‡µá‡¥∞‡µÇ!", join_subtitle_fan: "‡¥è‡¥±‡µç‡¥±‡¥µ‡µÅ‡¥Ç ‡¥™‡µÅ‡¥§‡¥ø‡¥Ø ‡¥µ‡¥æ‡µº‡¥§‡µç‡¥§‡¥ï‡µæ, ‡¥ü‡µÇ‡µº ‡¥§‡µÄ‡¥Ø‡¥§‡¥ø‡¥ï‡µæ, ‡¥é‡¥ï‡µç‡¥∏‡µç‡¥ï‡µç‡¥≤‡µÇ‡¥∏‡µÄ‡¥µ‡µç ‡¥â‡¥≥‡µç‡¥≥‡¥ü‡¥ï‡µç‡¥ï‡¥Ç ‡¥é‡¥®‡µç‡¥®‡¥ø‡¥µ ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥á‡µª‡¥¨‡µã‡¥ï‡µç‡¥∏‡¥ø‡µΩ ‡¥®‡µá‡¥∞‡¥ø‡¥ü‡µç‡¥ü‡µç ‡¥≤‡¥≠‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥∏‡µà‡µª ‡¥Ö‡¥™‡µç‡¥™‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï.", birthday_label: "‡¥ú‡¥®‡µç‡¥Æ‡¥¶‡¥ø‡¥®‡¥Ç (‡¥ì‡¥™‡µç‡¥∑‡¥£‡µΩ)", subscribe_btn: "‡¥∏‡¥¨‡µç‡¥∏‡µç‡¥ï‡µç‡¥∞‡µà‡¥¨‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï", join_title_band: "‡¥¨‡¥æ‡µª‡¥°‡¥ø‡µΩ ‡¥ö‡µá‡¥∞‡¥æ‡µª ‡¥Ü‡¥ó‡µç‡¥∞‡¥π‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ‡¥£‡µç‡¥ü‡µã?", join_subtitle_band: "‡¥û‡¥ô‡µç‡¥ô‡¥≥‡µã‡¥ü‡µä‡¥™‡µç‡¥™‡¥Ç ‡¥±‡µã‡¥ï‡µç‡¥ï‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡µª ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡µæ‡¥ï‡µç‡¥ï‡µç ‡¥ï‡¥¥‡¥ø‡¥µ‡µÅ‡¥£‡µç‡¥ü‡µÜ‡¥®‡µç‡¥®‡µç ‡¥ï‡¥∞‡µÅ‡¥§‡µÅ‡¥®‡µç‡¥®‡µÅ‡¥£‡µç‡¥ü‡µã? ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥µ‡¥ø‡¥∂‡¥¶‡¥æ‡¥Ç‡¥∂‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥∏‡µÉ‡¥∑‡µç‡¥ü‡¥ø‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥≤‡¥ø‡¥ô‡µç‡¥ï‡µÅ‡¥Ç ‡¥∏‡¥π‡¥ø‡¥§‡¥Ç ‡¥§‡¥æ‡¥¥‡µÜ‡¥Ø‡µÅ‡¥≥‡µç‡¥≥ ‡¥´‡µã‡¥Ç ‡¥™‡µÇ‡¥∞‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï. ‡¥û‡¥ô‡µç‡¥ô‡µæ ‡¥é‡¥™‡µç‡¥™‡µã‡¥¥‡µÅ‡¥Ç ‡¥™‡µÅ‡¥§‡¥ø‡¥Ø ‡¥™‡µç‡¥∞‡¥§‡¥ø‡¥≠‡¥ï‡¥≥‡µÜ ‡¥§‡µá‡¥ü‡µÅ‡¥®‡µç‡¥®‡µÅ!", audition_btn: "‡¥ì‡¥°‡¥ø‡¥∑‡µª ‡¥∏‡¥Æ‡µº‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï" },
        ta: { nav_home: "‡ÆÆ‡ØÅ‡Æï‡Æ™‡Øç‡Æ™‡ØÅ", nav_albums: "‡ÆÜ‡Æ≤‡Øç‡Æ™‡Æô‡Øç‡Æï‡Æ≥‡Øç", nav_events: "‡Æ®‡Æø‡Æï‡Æ¥‡Øç‡Æµ‡ØÅ‡Æï‡Æ≥‡Øç", nav_faqs: "‡ÆÖ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æü‡Æø ‡Æï‡Øá‡Æü‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡Æï‡Æ≥‡Øç", nav_join: "‡Æö‡Øá‡Æ∞‡Æµ‡ØÅ‡ÆÆ‡Øç", nav_book: "‡Æá‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æï", nav_chatbox: "‡ÆÖ‡Æ∞‡Æü‡Øç‡Æü‡Øà ‡Æ™‡ØÜ‡Æü‡Øç‡Æü‡Æø", welcome_title: "‡Æü‡Øç‡Æ∞‡ØÄ‡ÆÆ‡Øç‡Æ∏‡Øç ‡Æá‡Æ©‡Øç ‡Æ™‡Øç‡Æ≥‡ØÇ‡Æï‡Øç‡Æï‡ØÅ ‡Æµ‡Æ∞‡Æµ‡Øá‡Æ±‡Øç‡Æï‡Æø‡Æ±‡Øã‡ÆÆ‡Øç", welcome_subtitle: "‡Æá‡Æö‡Øà‡ÆØ‡Æø‡Æ©‡Øç ‡ÆÜ‡Æ¥‡ÆÆ‡Øç ‡Æá‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æá‡Æü‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç", welcome_text: "‡Æ≤‡Øã‡Æ∞‡ÆÆ‡Øç ‡Æá‡Æ™‡Øç‡Æö‡ÆÆ‡Øç ‡Æü‡Øã‡Æ≤‡Æ∞‡Øç ‡Æö‡Æø‡Æü‡Øç ‡ÆÖ‡ÆÆ‡ØÜ‡Æü‡Øç ‡Æï‡Ææ‡Æ©‡Øç‡Æö‡ØÜ‡Æï‡Øç‡Æü‡ØÜ‡Æü‡Øç‡Æü‡Æ∞‡Øç ‡ÆÖ‡Æü‡Æø‡Æ™‡Æø‡Æö‡Æø‡Æô‡Øç ‡Æé‡Æ≤‡Øà‡Æü‡Øç. <br>‡Æï‡Æ∞‡Æ™‡Øç‡Æü‡Æø ‡ÆÆ‡Øä‡Æ≤‡Æ∏‡Øç‡Æü‡Æø‡ÆØ‡Ææ‡Æ∏‡Øç ‡Æ™‡Øã‡Æö‡Æø‡ÆÆ‡Æ∏‡Øç ‡Æ®‡Æø‡Æö‡Æø ‡Æ™‡Æø‡Æ¥‡Øà. ‡Æï‡Æ£‡Øç‡Æü‡ØÅ‡Æ™‡Æø‡Æü‡Æø‡Æ™‡Øç‡Æ™‡Ææ‡Æ≥‡Æ∞‡Øç", join_us_btn: "‡Æé‡Æô‡Øç‡Æï‡Æ≥‡ØÅ‡Æü‡Æ©‡Øç ‡Æö‡Øá‡Æ∞‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç", copyright: "‡Æ™‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æ∞‡Æø‡ÆÆ‡Øà ‡ÆÆ‡Æ±‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ", albums_title: "‡Æé‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ≤‡Øç‡Æ™‡Æô‡Øç‡Æï‡Æ≥‡Øç", listen: "‡Æï‡Øá‡Æ≥‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç", join_title_fan: "‡Æ§‡Øá‡Æö‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡Æö‡Øá‡Æ∞‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç!", join_subtitle_fan: "‡Æö‡ÆÆ‡ØÄ‡Æ™‡Æ§‡Øç‡Æ§‡Æø‡ÆØ ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡Æø‡Æï‡Æ≥‡Øç, ‡Æö‡ØÅ‡Æ±‡Øç‡Æ±‡ØÅ‡Æ™‡Øç‡Æ™‡ÆØ‡Æ£ ‡Æ§‡Øá‡Æ§‡Æø‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Æø‡Æ∞‡Æ§‡Øç‡ÆØ‡Øá‡Æï ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æü‡Æï‡Øç‡Æï‡Æ§‡Øç‡Æ§‡Øà ‡Æ®‡Øá‡Æ∞‡Æü‡Æø‡ÆØ‡Ææ‡Æï ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æá‡Æ©‡Øç‡Æ™‡Ææ‡Æï‡Øç‡Æ∏‡Æø‡Æ≤‡Øç ‡Æ™‡ØÜ‡Æ± ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç.", birthday_label: "‡Æ™‡Æø‡Æ±‡Æ®‡Øç‡Æ§‡Æ®‡Ææ‡Æ≥‡Øç (‡Æµ‡Æø‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æ§‡Øç‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ)", subscribe_btn: " ‡Æï‡ØÅ‡Æ¥‡ØÅ‡Æö‡Øá‡Æ∞‡Øç", join_title_band: "‡Æá‡Æö‡Øà‡Æï‡Øç‡Æï‡ØÅ‡Æ¥‡ØÅ‡Æµ‡Æø‡Æ≤‡Øç ‡Æö‡Øá‡Æ∞ ‡Æµ‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ‡Æï‡Æø‡Æ±‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Ææ?", join_subtitle_band: "‡Æé‡Æô‡Øç‡Æï‡Æ≥‡ØÅ‡Æü‡Æ©‡Øç ‡Æ∞‡Ææ‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Æø‡Æü‡ÆÆ‡Øç ‡Æé‡Æ©‡Øç‡Æ© ‡Æá‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ ‡Æé‡Æ©‡Øç‡Æ±‡ØÅ ‡Æ®‡Æø‡Æ©‡Øà‡Æï‡Øç‡Æï‡Æø‡Æ±‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Ææ? ‡Æï‡ØÄ‡Æ¥‡Øá ‡Æâ‡Æ≥‡Øç‡Æ≥ ‡Æ™‡Æü‡Æø‡Æµ‡Æ§‡Øç‡Æ§‡Øà ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Æø‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Øá‡Æ≤‡Øà‡ÆØ‡Æø‡Æ©‡Øç ‡Æá‡Æ£‡Øà‡Æ™‡Øç‡Æ™‡ØÅ‡Æü‡Æ©‡Øç ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æ®‡Ææ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æé‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ‡ÆÆ‡Øç ‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ ‡Æ§‡Æø‡Æ±‡ÆÆ‡Øà‡Æï‡Æ≥‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Øã‡ÆÆ‡Øç!", audition_btn: "‡Æö‡Øã‡Æ§‡Æ©‡Øà‡ÆØ‡Øà‡Æö‡Øç ‡Æö‡ÆÆ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç" }
    };

    const setLanguage = (lang) => {
        document.querySelectorAll('[data-key]').forEach(elem => {
            const key = elem.getAttribute('data-key');
            if (translations[lang] && translations[lang][key]) {
                elem.innerHTML = translations[lang][key];
            }
        });
        localStorage.setItem('language', lang);
    };

    if (langSelect) {
        langSelect.addEventListener('change', (event) => {
            setLanguage(event.target.value);
        });
    }

    // --- Voice Commands ---
    const micBtn = document.getElementById('mic-btn');
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    if (SpeechRecognition && micBtn) {
        const recognition = new SpeechRecognition();
        const commands = {
            'home': '/Dreamsinblue/index.html',
            'albums': '/Dreamsinblue/albums.html',
            'events': '/Dreamsinblue/events.html',
            'faqs': '/Dreamsinblue/faqs.html',
            'join': '/Dreamsinblue/join.html',
            'book now': '/Dreamsinblue/book.html',
            'chatbox': '/Dreamsinblue/chat.html'
        };

        micBtn.addEventListener('click', () => {
            try {
                recognition.start();
            } catch(e) {
                console.error("Recognition already started.");
            }
        });

        recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript.trim().toLowerCase();
            if (commands[transcript]) {
                window.location.href = commands[transcript];
            } else {
                alert(`Command not recognized: "${transcript}"`);
            }
        };

        recognition.onerror = (event) => {
            alert('Error occurred in recognition: ' + event.error);
        };
    } else if (micBtn) {
        micBtn.style.display = 'none';
    }

    // --- Initial Load ---
    const savedTheme = localStorage.getItem('theme') || 'dark';
    applyTheme(savedTheme);

    if (langSelect) {
        const savedLang = localStorage.getItem('language') || 'en';
        langSelect.value = savedLang;
        setLanguage(savedLang);
    }

    // --- Active Navigation Link ---
    const currentPagePath = window.location.pathname;
    const navLinks = document.querySelectorAll('.nav-links a, .sidebar a');

    navLinks.forEach(link => {
        // Create a URL object to easily compare pathnames, ignoring domain
        const linkPath = new URL(link.href).pathname;
        if (linkPath === currentPagePath) {
            link.classList.add('active-link');
        }
    });

    // --- Shrinking Header & Back to Top Button ---
    const header = document.querySelector('.header');
    const midSection = document.querySelector('.mid'); // For home page parallax
    const backToTopBtn = document.getElementById('back-to-top-btn');

    window.addEventListener('scroll', () => {
        const scrollPosition = window.scrollY;

        // Header shrink effect
        if (header) {
            if (scrollPosition > 50) {
                header.classList.add('header-scrolled');
            } else {
                header.classList.remove('header-scrolled');
            }
        }

        // Back to Top button visibility
        if (backToTopBtn) {
            if (scrollPosition > 300) { // Show button after 300px
                backToTopBtn.classList.add('visible');
            } else {
                backToTopBtn.classList.remove('visible');
            }
        }

        // Parallax effect for home page content
        if (midSection) {
            midSection.style.transform = `translateY(${scrollPosition * 0.4}px)`;
        }
    });

    // Back to Top click event
    if (backToTopBtn) {
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    }
});